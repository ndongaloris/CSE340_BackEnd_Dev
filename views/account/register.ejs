<% if (title){ %> <!-- Checking if the 'title' variable is defined -->
    <h1><%= title %></h1> <!-- Displaying the title if it exists -->
<% }else{
    res.redirect("/") <!-- Redirecting to the root URL if the 'title' variable is not defined -->
} %>

<%- messages() %> <!-- Displaying flash messages -->

<% if (errors) { %> <!-- Checking if the 'errors' variable is defined -->
    <ul class="notice"> <!-- Starting an unordered list for displaying errors -->
    <% errors.array().forEach(error => { %> <!-- Looping through each error in the 'errors' array -->
    <li><%= error.msg %></li> <!-- Displaying each error message -->
    <%  }) %> <!-- Ending the loop -->
    </ul> <!-- Closing the unordered list -->
<% } %> <!-- Ending the conditional block for displaying errors -->

<form action="/account/register" method="post" id="registerForm"> <!-- Registration form starts -->
    <label>First Name:<input type="text" name="account_firstname" id="accountFirstname" required value="<%= locals.account_firstname %>"></label> <!-- First name input field -->
    <label>Last Name:<input type="text" name="account_lastname" id="account_lastname" required value="<%= locals.account_lastname %>"></label> <!-- Last name input field -->

    <label>Email:<input type="email" name="account_email" id="account_email" required value="<%= locals.account_email %>"></label> <!-- Email input field -->
    <span>Passwords must be at least 12 characters and contain at least 1 number, 1 capital letter and 1 special character</span> <!-- Password strength requirement -->
    <label>Password:<input type="password" name="account_password" id="account_password" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$" required></label> <!-- Password input field with pattern validation -->
    
    <button type="submit" id="loginButton">Register</button> <!-- Submit button for registration -->
    <p>I already have an Account<a href="/account/login">Sign-in</a></p> <!-- Link to login page -->
</form> <!-- Registration form ends -->
